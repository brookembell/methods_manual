<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Finalize Model Data Inputs | LASTING Four-Pillar Model Methodology</title>
  <meta name="description" content="This is the comprehensive manual that describes all data inputs and methods used for the 4-pillar LASTING model." />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Finalize Model Data Inputs | LASTING Four-Pillar Model Methodology" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the comprehensive manual that describes all data inputs and methods used for the 4-pillar LASTING model." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Finalize Model Data Inputs | LASTING Four-Pillar Model Methodology" />
  
  <meta name="twitter:description" content="This is the comprehensive manual that describes all data inputs and methods used for the 4-pillar LASTING model." />
  

<meta name="author" content="Brooke M. Bell" />


<meta name="date" content="2025-05-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="calculate-cost-environment-and-social-impact-factors.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">LASTING Methods Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#github-repository"><i class="fa fa-check"></i>Github Repository</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#data-inputs"><i class="fa fa-check"></i>Data Inputs</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#code"><i class="fa fa-check"></i>Code</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#model-output"><i class="fa fa-check"></i>Model Output</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html"><i class="fa fa-check"></i><b>1</b> Summary of Data Inputs</a>
<ul>
<li class="chapter" data-level="1.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#diet-inputs"><i class="fa fa-check"></i><b>1.2</b> Diet Inputs</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#counterfactual-intake"><i class="fa fa-check"></i><b>1.2.1</b> Counterfactual Intake</a></li>
<li class="chapter" data-level="1.2.2" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#dietary-intake"><i class="fa fa-check"></i><b>1.2.2</b> Dietary Intake</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#economic-inputs"><i class="fa fa-check"></i><b>1.3</b> Economic Inputs</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#food-prices"><i class="fa fa-check"></i><b>1.3.1</b> Food Prices</a></li>
<li class="chapter" data-level="1.3.2" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#food-at-home-fah-vs.-food-away-from-home-fafh-ratio"><i class="fa fa-check"></i><b>1.3.2</b> Food-At-Home (FAH) vs.Â Food-Away-From-Home (FAFH) Ratio</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#environment-inputs"><i class="fa fa-check"></i><b>1.4</b> Environment Inputs</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#greenhouse-gas-emissions-ghg-and-cumulative-energy-demand-ced-impact-factors"><i class="fa fa-check"></i><b>1.4.1</b> Greenhouse Gas Emissions (GHG) and Cumulative Energy Demand (CED) Impact Factors</a></li>
<li class="chapter" data-level="1.4.2" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#water-scarcity-ws-and-bluewater-use-bwu-impact-factors"><i class="fa fa-check"></i><b>1.4.2</b> Water Scarcity (WS) and Bluewater Use (BWU) Impact Factors</a></li>
<li class="chapter" data-level="1.4.3" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#land-use-impact-factors"><i class="fa fa-check"></i><b>1.4.3</b> Land Use Impact Factors</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#health-inputs"><i class="fa fa-check"></i><b>1.5</b> Health Inputs</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#cancer-incidence"><i class="fa fa-check"></i><b>1.5.1</b> Cancer Incidence</a></li>
<li class="chapter" data-level="1.5.2" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#cardiometabolic-disease-cmd-mortality"><i class="fa fa-check"></i><b>1.5.2</b> Cardiometabolic Disease (CMD) Mortality</a></li>
<li class="chapter" data-level="1.5.3" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#effect-sizes-for-diet-and-body-mass-index-bmi"><i class="fa fa-check"></i><b>1.5.3</b> Effect Sizes for Diet and Body Mass Index (BMI)</a></li>
<li class="chapter" data-level="1.5.4" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#effect-sizes-for-diet-and-systolic-blood-pressure-sbp"><i class="fa fa-check"></i><b>1.5.4</b> Effect Sizes for Diet and Systolic Blood Pressure (SBP)</a></li>
<li class="chapter" data-level="1.5.5" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#log-relative-risks-logrr-for-diet-cancer"><i class="fa fa-check"></i><b>1.5.5</b> Log Relative Risks (LogRR) for Diet-Cancer</a></li>
<li class="chapter" data-level="1.5.6" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#overweight-prevalence"><i class="fa fa-check"></i><b>1.5.6</b> Overweight Prevalence</a></li>
<li class="chapter" data-level="1.5.7" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#relative-risks-rr-for-bmi-and-cancer"><i class="fa fa-check"></i><b>1.5.7</b> Relative Risks (RR) for BMI and Cancer</a></li>
<li class="chapter" data-level="1.5.8" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#relative-risks-rr-for-bmi-and-cmd"><i class="fa fa-check"></i><b>1.5.8</b> Relative Risks (RR) for BMI and CMD</a></li>
<li class="chapter" data-level="1.5.9" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#relative-risks-rr-for-sbp-and-cmd"><i class="fa fa-check"></i><b>1.5.9</b> Relative Risks (RR) for SBP and CMD</a></li>
<li class="chapter" data-level="1.5.10" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#systolic-blood-pressure"><i class="fa fa-check"></i><b>1.5.10</b> Systolic Blood Pressure</a></li>
<li class="chapter" data-level="1.5.11" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#tmred"><i class="fa fa-check"></i><b>1.5.11</b> TMRED</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#social-inputs"><i class="fa fa-check"></i><b>1.6</b> Social Inputs</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#forced-labor-risk"><i class="fa fa-check"></i><b>1.6.1</b> Forced Labor Risk</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#other-inputs"><i class="fa fa-check"></i><b>1.7</b> Other Inputs</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#mapping-from-food-group-to-fcid-code"><i class="fa fa-check"></i><b>1.7.1</b> Mapping from Food Group to FCID Code</a></li>
<li class="chapter" data-level="1.7.2" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#mapping-from-food-group-to-fndds-code"><i class="fa fa-check"></i><b>1.7.2</b> Mapping from Food Group to FNDDS Code</a></li>
<li class="chapter" data-level="1.7.3" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#inedible-and-wasted-food-proportions"><i class="fa fa-check"></i><b>1.7.3</b> Inedible and Wasted Food Proportions</a></li>
<li class="chapter" data-level="1.7.4" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#labels"><i class="fa fa-check"></i><b>1.7.4</b> Labels</a></li>
<li class="chapter" data-level="1.7.5" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#weight-conversion-units"><i class="fa fa-check"></i><b>1.7.5</b> Weight Conversion Units</a></li>
<li class="chapter" data-level="1.7.6" data-path="summary-of-data-inputs.html"><a href="summary-of-data-inputs.html#u.s.-population-size"><i class="fa fa-check"></i><b>1.7.6</b> U.S. Population Size</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html"><i class="fa fa-check"></i><b>2</b> Cleaning Code for NHANES Diet Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#processed-and-organ-meat"><i class="fa fa-check"></i><b>2.1</b> Processed and Organ Meat</a></li>
<li class="chapter" data-level="2.2" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#clean-raw-nhanes-data"><i class="fa fa-check"></i><b>2.2</b> Clean Raw NHANES Data</a></li>
<li class="chapter" data-level="2.3" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#create-sugar-sweetened-beverage-ssb-variables"><i class="fa fa-check"></i><b>2.3</b> Create Sugar Sweetened Beverage (SSB) Variables</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#import-and-merge-data-inputs"><i class="fa fa-check"></i><b>2.3.1</b> Import and Merge Data Inputs</a></li>
<li class="chapter" data-level="2.3.2" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#create-ssb-indicator-variable"><i class="fa fa-check"></i><b>2.3.2</b> Create SSB Indicator Variable</a></li>
<li class="chapter" data-level="2.3.3" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#calculate-ssb-intake"><i class="fa fa-check"></i><b>2.3.3</b> Calculate SSB Intake</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#energy-adjustement"><i class="fa fa-check"></i><b>2.4</b> Energy Adjustement</a></li>
<li class="chapter" data-level="2.5" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#calculating-standard-deviations-using-sas-macros"><i class="fa fa-check"></i><b>2.5</b> Calculating Standard Deviations Using SAS Macros</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#prepare-nhanes-data-for-sas-macros"><i class="fa fa-check"></i><b>2.5.1</b> Prepare NHANES Data for SAS Macros</a></li>
<li class="chapter" data-level="2.5.2" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#fill-out-macro-template"><i class="fa fa-check"></i><b>2.5.2</b> Fill Out Macro Template</a></li>
<li class="chapter" data-level="2.5.3" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#log-in-to-tufts-hpc"><i class="fa fa-check"></i><b>2.5.3</b> Log In to Tufts HPC</a></li>
<li class="chapter" data-level="2.5.4" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#run-sas-macro"><i class="fa fa-check"></i><b>2.5.4</b> Run SAS Macro</a></li>
<li class="chapter" data-level="2.5.5" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#export-output-to-box"><i class="fa fa-check"></i><b>2.5.5</b> Export Output to Box</a></li>
<li class="chapter" data-level="2.5.6" data-path="cleaning-code-for-nhanes-diet-data.html"><a href="cleaning-code-for-nhanes-diet-data.html#clean-output-from-cluster"><i class="fa fa-check"></i><b>2.5.6</b> Clean Output from Cluster</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html"><i class="fa fa-check"></i><b>3</b> Cleaning Code for Health Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#create-final-data-inputs"><i class="fa fa-check"></i><b>3.1</b> Create Final Data Inputs</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#other-data-inputs"><i class="fa fa-check"></i><b>3.1.1</b> Other Data Inputs</a></li>
<li class="chapter" data-level="3.1.2" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#health-data-inputs"><i class="fa fa-check"></i><b>3.1.2</b> Health Data Inputs</a></li>
<li class="chapter" data-level="3.1.3" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#diet-data-inputs"><i class="fa fa-check"></i><b>3.1.3</b> Diet Data Inputs</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#clean-health-datasets"><i class="fa fa-check"></i><b>3.2</b> Clean Health Datasets</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#cancer-incidence-and-2-cvd-mortality"><i class="fa fa-check"></i><b>3.2.1</b> (1) Cancer incidence and (2) CVD mortality</a></li>
<li class="chapter" data-level="3.2.2" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#effect-sizes-for-diet-and-bmi-and-4-diet-and-sbp"><i class="fa fa-check"></i><b>3.2.2</b> (3) Effect sizes for diet and BMI and (4) diet and SBP</a></li>
<li class="chapter" data-level="3.2.3" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#rrs-for-bmi-and-cancer-and-6-for-bmi-and-cvd"><i class="fa fa-check"></i><b>3.2.3</b> (5) RRs for BMI and cancer and (6) for BMI and CVD</a></li>
<li class="chapter" data-level="3.2.4" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#logrrs-for-diet-and-cancer-and-8-for-diet-and-cvd"><i class="fa fa-check"></i><b>3.2.4</b> (7) LogRRs for diet and cancer and (8) for diet and CVD</a></li>
<li class="chapter" data-level="3.2.5" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#rrs-for-sbp-and-cvd"><i class="fa fa-check"></i><b>3.2.5</b> (9) RRs for SBP and CVD</a></li>
<li class="chapter" data-level="3.2.6" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#current-intake-nhanes-11-tmred-12-counterfactual-and-13-other-health-data"><i class="fa fa-check"></i><b>3.2.6</b> (10) Current intake (NHANES), (11) TMRED, (12) Counterfactual, and (13) Other health data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="cleaning-code-for-health-data.html"><a href="cleaning-code-for-health-data.html#restructure-data"><i class="fa fa-check"></i><b>3.3</b> Restructure data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cleaning-code-for-environment-data.html"><a href="cleaning-code-for-environment-data.html"><i class="fa fa-check"></i><b>4</b> Cleaning Code for Environment Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="cleaning-code-for-environment-data.html"><a href="cleaning-code-for-environment-data.html#clean-and-restructure-intermediary-datasets"><i class="fa fa-check"></i><b>4.1</b> Clean and Restructure Intermediary Datasets</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="cleaning-code-for-environment-data.html"><a href="cleaning-code-for-environment-data.html#import-and-merge-data-inputs-1"><i class="fa fa-check"></i><b>4.1.1</b> Import and Merge Data Inputs</a></li>
<li class="chapter" data-level="4.1.2" data-path="cleaning-code-for-environment-data.html"><a href="cleaning-code-for-environment-data.html#calculate-average-environmental-and-social-impact-per-fcid-code"><i class="fa fa-check"></i><b>4.1.2</b> Calculate Average Environmental and Social Impact, Per FCID Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="cleaning-code-for-cost-data.html"><a href="cleaning-code-for-cost-data.html"><i class="fa fa-check"></i><b>5</b> Cleaning Code for Cost Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="cleaning-code-for-cost-data.html"><a href="cleaning-code-for-cost-data.html#clean-and-restructure-intermediary-datasets-1"><i class="fa fa-check"></i><b>5.1</b> Clean and Restructure Intermediary Datasets</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="cleaning-code-for-cost-data.html"><a href="cleaning-code-for-cost-data.html#import-and-merge-data-inputs-2"><i class="fa fa-check"></i><b>5.1.1</b> Import and Merge Data Inputs</a></li>
<li class="chapter" data-level="5.1.2" data-path="cleaning-code-for-cost-data.html"><a href="cleaning-code-for-cost-data.html#calculate-average-food-cost-per-fndds-food-code"><i class="fa fa-check"></i><b>5.1.2</b> Calculate Average Food Cost, Per FNDDS Food Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html"><i class="fa fa-check"></i><b>6</b> Calculate Cost, Environment, and Social Impact Factors</a>
<ul>
<li class="chapter" data-level="6.1" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#prepare-data"><i class="fa fa-check"></i><b>6.1</b> Prepare Data</a></li>
<li class="chapter" data-level="6.2" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#cost-impact-factors"><i class="fa fa-check"></i><b>6.2</b> Cost Impact Factors</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#cost-impact-factors-by-food-by-subgroup"><i class="fa fa-check"></i><b>6.2.1</b> Cost Impact Factors, by Food, by Subgroup</a></li>
<li class="chapter" data-level="6.2.2" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#cost-impact-factors-per-100-grams-and-per-1-dga-serving"><i class="fa fa-check"></i><b>6.2.2</b> Cost Impact Factors, Per 100 Grams and Per 1 DGA Serving</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#environmental-social-impact-factors"><i class="fa fa-check"></i><b>6.3</b> Environmental &amp; Social Impact Factors</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#environmental-social-impact-factors-by-food-by-subgroup"><i class="fa fa-check"></i><b>6.3.1</b> Environmental &amp; Social Impact Factors, by Food, by Subgroup</a></li>
<li class="chapter" data-level="6.3.2" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#environmentsocial-impact-factors-per-100-grams-and-per-1-dga-serving"><i class="fa fa-check"></i><b>6.3.2</b> Environment/Social Impact Factors, Per 100 Grams and Per 1 DGA Serving</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#finalize-impact-factors"><i class="fa fa-check"></i><b>6.4</b> Finalize Impact Factors</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#merge-cost-environment-and-social-impact-factors"><i class="fa fa-check"></i><b>6.4.1</b> Merge Cost, Environment, and Social Impact Factors</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#calculate-inedible-and-wasted-proportions"><i class="fa fa-check"></i><b>6.5</b> Calculate Inedible and Wasted Proportions</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#environmentsocial"><i class="fa fa-check"></i><b>6.5.1</b> Environment/Social</a></li>
<li class="chapter" data-level="6.5.2" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#cost"><i class="fa fa-check"></i><b>6.5.2</b> Cost</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="calculate-cost-environment-and-social-impact-factors.html"><a href="calculate-cost-environment-and-social-impact-factors.html#export-data"><i class="fa fa-check"></i><b>6.6</b> Export Data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="finalize-model-data-inputs.html"><a href="finalize-model-data-inputs.html"><i class="fa fa-check"></i><b>7</b> Finalize Model Data Inputs</a>
<ul>
<li class="chapter" data-level="7.1" data-path="finalize-model-data-inputs.html"><a href="finalize-model-data-inputs.html#clean-and-merge-all-inputs"><i class="fa fa-check"></i><b>7.1</b> Clean and Merge All Inputs</a></li>
<li class="chapter" data-level="7.2" data-path="finalize-model-data-inputs.html"><a href="finalize-model-data-inputs.html#copy-model-inputs-to-github"><i class="fa fa-check"></i><b>7.2</b> Copy Model Inputs to GitHub</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LASTING Four-Pillar Model Methodology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="finalize-model-data-inputs" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Finalize Model Data Inputs<a href="finalize-model-data-inputs.html#finalize-model-data-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter walks you through the final cleaning process for the model inputs.</p>
<p>Set up the working environment.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="finalize-model-data-inputs.html#cb493-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb493-2"><a href="finalize-model-data-inputs.html#cb493-2" tabindex="-1"></a></span>
<span id="cb493-3"><a href="finalize-model-data-inputs.html#cb493-3" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span>
<span id="cb493-4"><a href="finalize-model-data-inputs.html#cb493-4" tabindex="-1"></a></span>
<span id="cb493-5"><a href="finalize-model-data-inputs.html#cb493-5" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb493-6"><a href="finalize-model-data-inputs.html#cb493-6" tabindex="-1"></a></span>
<span id="cb493-7"><a href="finalize-model-data-inputs.html#cb493-7" tabindex="-1"></a><span class="co"># create date value</span></span>
<span id="cb493-8"><a href="finalize-model-data-inputs.html#cb493-8" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span></code></pre></div>
<div id="clean-and-merge-all-inputs" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Clean and Merge All Inputs<a href="finalize-model-data-inputs.html#clean-and-merge-all-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Import the diet/health dataset (i.e., mega_costenv).</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="finalize-model-data-inputs.html#cb494-1" tabindex="-1"></a>nhanes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;data_inputs/FINAL/cleaned_data/mega_costenv_structure_temp_&quot;</span>, date, <span class="st">&quot;_FINAL.csv&quot;</span>))</span></code></pre></div>
<p>Here is where you specify the substitution effects. For the four-pillar paper, we set these to 0. However, if you will take into account substituion effects (Kyra, I mean you), you will need to update these numbers. Please consult Fred and/or Nicole as to what these values should be for your analysis.</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="finalize-model-data-inputs.html#cb495-1" tabindex="-1"></a><span class="co"># add in substitution effects, currently set to 0</span></span>
<span id="cb495-2"><a href="finalize-model-data-inputs.html#cb495-2" tabindex="-1"></a>nhanes1 <span class="ot">&lt;-</span> nhanes <span class="sc">%&gt;%</span> </span>
<span id="cb495-3"><a href="finalize-model-data-inputs.html#cb495-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Mean_substitution_Food_price =</span> <span class="dv">0</span>,</span>
<span id="cb495-4"><a href="finalize-model-data-inputs.html#cb495-4" tabindex="-1"></a>         <span class="at">SE_substitution_Food_price =</span> <span class="dv">0</span>,</span>
<span id="cb495-5"><a href="finalize-model-data-inputs.html#cb495-5" tabindex="-1"></a>         <span class="at">Mean_substitution_CED =</span> <span class="dv">0</span>,</span>
<span id="cb495-6"><a href="finalize-model-data-inputs.html#cb495-6" tabindex="-1"></a>         <span class="at">SE_substitution_CED =</span> <span class="dv">0</span>,</span>
<span id="cb495-7"><a href="finalize-model-data-inputs.html#cb495-7" tabindex="-1"></a>         <span class="at">Mean_substitution_GHG =</span> <span class="dv">0</span>,</span>
<span id="cb495-8"><a href="finalize-model-data-inputs.html#cb495-8" tabindex="-1"></a>         <span class="at">SE_substitution_GHG =</span> <span class="dv">0</span>,</span>
<span id="cb495-9"><a href="finalize-model-data-inputs.html#cb495-9" tabindex="-1"></a>         <span class="at">Mean_substitution_WATER =</span> <span class="dv">0</span>,</span>
<span id="cb495-10"><a href="finalize-model-data-inputs.html#cb495-10" tabindex="-1"></a>         <span class="at">SE_substitution_WATER =</span> <span class="dv">0</span>,</span>
<span id="cb495-11"><a href="finalize-model-data-inputs.html#cb495-11" tabindex="-1"></a>         <span class="at">Mean_substitution_BLUEWATER =</span> <span class="dv">0</span>,</span>
<span id="cb495-12"><a href="finalize-model-data-inputs.html#cb495-12" tabindex="-1"></a>         <span class="at">SE_substitution_BLUEWATER =</span> <span class="dv">0</span>,</span>
<span id="cb495-13"><a href="finalize-model-data-inputs.html#cb495-13" tabindex="-1"></a>         <span class="at">Mean_substitution_FL =</span> <span class="dv">0</span>,</span>
<span id="cb495-14"><a href="finalize-model-data-inputs.html#cb495-14" tabindex="-1"></a>         <span class="at">SE_substitution_FL =</span> <span class="dv">0</span>)</span></code></pre></div>
<p>Import the impact factors.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="finalize-model-data-inputs.html#cb496-1" tabindex="-1"></a>enviro_IFs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;data_inputs/IMPACT_FACTORS/output_data/Impacts_enviro_&quot;</span>, date, <span class="st">&quot;.csv&quot;</span>))</span>
<span id="cb496-2"><a href="finalize-model-data-inputs.html#cb496-2" tabindex="-1"></a>cost_IFs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;data_inputs/IMPACT_FACTORS/output_data/Impacts_cost_&quot;</span>, date, <span class="st">&quot;.csv&quot;</span>))</span></code></pre></div>
<p>For the cost impact factors, we made the decsion to use the factors for the ânon-mixedâ dishes, as we thought these were the best representation of the food groups in the DGA (which is what our analysis focused on). Again, you may need to consult Nicole on what the best decision is for your analysis.</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="finalize-model-data-inputs.html#cb497-1" tabindex="-1"></a><span class="co"># use the &#39;non-mixed&#39; dishes for impact factors</span></span>
<span id="cb497-2"><a href="finalize-model-data-inputs.html#cb497-2" tabindex="-1"></a>cost_IFs1 <span class="ot">&lt;-</span> cost_IFs <span class="sc">%&gt;%</span> </span>
<span id="cb497-3"><a href="finalize-model-data-inputs.html#cb497-3" tabindex="-1"></a>  <span class="fu">filter</span>(mixed_dish <span class="sc">==</span> <span class="st">&quot;Non-Mixed&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb497-4"><a href="finalize-model-data-inputs.html#cb497-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mixed_dish) <span class="sc">%&gt;%</span> </span>
<span id="cb497-5"><a href="finalize-model-data-inputs.html#cb497-5" tabindex="-1"></a>  <span class="fu">filter</span>(subgroup <span class="sc">!=</span> <span class="dv">0</span>) <span class="co"># remove subgroup 0</span></span>
<span id="cb497-6"><a href="finalize-model-data-inputs.html#cb497-6" tabindex="-1"></a>  </span>
<span id="cb497-7"><a href="finalize-model-data-inputs.html#cb497-7" tabindex="-1"></a>enviro_IFs1 <span class="ot">&lt;-</span> enviro_IFs <span class="sc">%&gt;%</span> </span>
<span id="cb497-8"><a href="finalize-model-data-inputs.html#cb497-8" tabindex="-1"></a>  <span class="fu">filter</span>(subgroup <span class="sc">!=</span> <span class="dv">0</span>) <span class="co"># remove subgroup 0</span></span></code></pre></div>
<p>To match the format of the cost impact factors, we need to duplicate the environmental impact factors three times to account for the different food types (i.e., grocery, non-grocery, and total). We donât have different environmental factors for these different food types, so we just use the exact same values across all three types (hence why we just duplicate).</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="finalize-model-data-inputs.html#cb498-1" tabindex="-1"></a>enviro_IFs_tot <span class="ot">&lt;-</span> enviro_IFs1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">food_type =</span> <span class="st">&quot;Total&quot;</span>)</span>
<span id="cb498-2"><a href="finalize-model-data-inputs.html#cb498-2" tabindex="-1"></a>enviro_IFs_gro <span class="ot">&lt;-</span> enviro_IFs1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">food_type =</span> <span class="st">&quot;Grocery&quot;</span>)</span>
<span id="cb498-3"><a href="finalize-model-data-inputs.html#cb498-3" tabindex="-1"></a>enviro_IFs_non <span class="ot">&lt;-</span> enviro_IFs1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">food_type =</span> <span class="st">&quot;Non-Grocery&quot;</span>)</span>
<span id="cb498-4"><a href="finalize-model-data-inputs.html#cb498-4" tabindex="-1"></a></span>
<span id="cb498-5"><a href="finalize-model-data-inputs.html#cb498-5" tabindex="-1"></a><span class="co"># bind together</span></span>
<span id="cb498-6"><a href="finalize-model-data-inputs.html#cb498-6" tabindex="-1"></a>enviro_IFs2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(enviro_IFs_tot, enviro_IFs_gro, enviro_IFs_non) <span class="sc">%&gt;%</span> </span>
<span id="cb498-7"><a href="finalize-model-data-inputs.html#cb498-7" tabindex="-1"></a>  <span class="fu">relocate</span>(food_type, <span class="at">.after =</span> food) <span class="sc">%&gt;%</span> </span>
<span id="cb498-8"><a href="finalize-model-data-inputs.html#cb498-8" tabindex="-1"></a>  <span class="fu">arrange</span>(subgroup, food, food_type)</span></code></pre></div>
<p>Merge the environmental and cost impact factors.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="finalize-model-data-inputs.html#cb499-1" tabindex="-1"></a><span class="co"># compare</span></span>
<span id="cb499-2"><a href="finalize-model-data-inputs.html#cb499-2" tabindex="-1"></a><span class="fu">table</span>(cost_IFs1<span class="sc">$</span>subgroup, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb499-3"><a href="finalize-model-data-inputs.html#cb499-3" tabindex="-1"></a><span class="fu">table</span>(enviro_IFs2<span class="sc">$</span>subgroup, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>) <span class="co">#same</span></span>
<span id="cb499-4"><a href="finalize-model-data-inputs.html#cb499-4" tabindex="-1"></a></span>
<span id="cb499-5"><a href="finalize-model-data-inputs.html#cb499-5" tabindex="-1"></a><span class="fu">table</span>(cost_IFs1<span class="sc">$</span>food, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb499-6"><a href="finalize-model-data-inputs.html#cb499-6" tabindex="-1"></a><span class="fu">table</span>(enviro_IFs2<span class="sc">$</span>food, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>) <span class="co">#diff food groups</span></span>
<span id="cb499-7"><a href="finalize-model-data-inputs.html#cb499-7" tabindex="-1"></a></span>
<span id="cb499-8"><a href="finalize-model-data-inputs.html#cb499-8" tabindex="-1"></a><span class="fu">table</span>(cost_IFs1<span class="sc">$</span>food_type, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>)</span>
<span id="cb499-9"><a href="finalize-model-data-inputs.html#cb499-9" tabindex="-1"></a><span class="fu">table</span>(enviro_IFs2<span class="sc">$</span>food_type, <span class="at">useNA =</span> <span class="st">&quot;always&quot;</span>) <span class="co">#same</span></span>
<span id="cb499-10"><a href="finalize-model-data-inputs.html#cb499-10" tabindex="-1"></a></span>
<span id="cb499-11"><a href="finalize-model-data-inputs.html#cb499-11" tabindex="-1"></a><span class="co"># merge enviro and cost impact factors</span></span>
<span id="cb499-12"><a href="finalize-model-data-inputs.html#cb499-12" tabindex="-1"></a>impact_factors <span class="ot">&lt;-</span> <span class="fu">full_join</span>(cost_IFs1, enviro_IFs2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;subgroup&quot;</span>, <span class="st">&quot;food&quot;</span>, <span class="st">&quot;food_type&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb499-13"><a href="finalize-model-data-inputs.html#cb499-13" tabindex="-1"></a>  <span class="fu">arrange</span>(subgroup, food, food_type)</span></code></pre></div>
<p>Below, we set the standard errors for the environmental (and social) impact factors to 0 since we donât have any variability values from dataField to use.</p>
<p>We also create the âcounterfactualâ impact factors, which are just the same. This is mostly redundant, itâs just a necessary thing to do based on the way the model code is set up to run.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="finalize-model-data-inputs.html#cb500-1" tabindex="-1"></a>impact_factors1 <span class="ot">&lt;-</span> impact_factors <span class="sc">%&gt;%</span> </span>
<span id="cb500-2"><a href="finalize-model-data-inputs.html#cb500-2" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb500-3"><a href="finalize-model-data-inputs.html#cb500-3" tabindex="-1"></a>         <span class="at">Mean_CED =</span> CEDperDGA,</span>
<span id="cb500-4"><a href="finalize-model-data-inputs.html#cb500-4" tabindex="-1"></a>         <span class="at">Mean_GHG =</span> GHGperDGA,</span>
<span id="cb500-5"><a href="finalize-model-data-inputs.html#cb500-5" tabindex="-1"></a>         <span class="at">Mean_WATER =</span> WATERperDGA,</span>
<span id="cb500-6"><a href="finalize-model-data-inputs.html#cb500-6" tabindex="-1"></a>         <span class="at">Mean_BLUEWATER =</span> BLUEWATERperDGA,</span>
<span id="cb500-7"><a href="finalize-model-data-inputs.html#cb500-7" tabindex="-1"></a>         <span class="at">Mean_Food_price =</span> costperDGA,</span>
<span id="cb500-8"><a href="finalize-model-data-inputs.html#cb500-8" tabindex="-1"></a>         <span class="at">Mean_FL =</span> FLperDGA</span>
<span id="cb500-9"><a href="finalize-model-data-inputs.html#cb500-9" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb500-10"><a href="finalize-model-data-inputs.html#cb500-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb500-11"><a href="finalize-model-data-inputs.html#cb500-11" tabindex="-1"></a>         <span class="co"># set SE to 0</span></span>
<span id="cb500-12"><a href="finalize-model-data-inputs.html#cb500-12" tabindex="-1"></a>    </span>
<span id="cb500-13"><a href="finalize-model-data-inputs.html#cb500-13" tabindex="-1"></a>         <span class="at">SE_CED =</span> <span class="dv">0</span>,</span>
<span id="cb500-14"><a href="finalize-model-data-inputs.html#cb500-14" tabindex="-1"></a>         <span class="at">SE_GHG =</span> <span class="dv">0</span>,</span>
<span id="cb500-15"><a href="finalize-model-data-inputs.html#cb500-15" tabindex="-1"></a>         <span class="at">SE_WATER =</span> <span class="dv">0</span>,</span>
<span id="cb500-16"><a href="finalize-model-data-inputs.html#cb500-16" tabindex="-1"></a>         <span class="at">SE_BLUEWATER =</span> <span class="dv">0</span>,</span>
<span id="cb500-17"><a href="finalize-model-data-inputs.html#cb500-17" tabindex="-1"></a>         <span class="at">SE_Food_price =</span> <span class="dv">0</span>,</span>
<span id="cb500-18"><a href="finalize-model-data-inputs.html#cb500-18" tabindex="-1"></a>         <span class="at">SE_FL =</span> <span class="dv">0</span>,</span>
<span id="cb500-19"><a href="finalize-model-data-inputs.html#cb500-19" tabindex="-1"></a>         </span>
<span id="cb500-20"><a href="finalize-model-data-inputs.html#cb500-20" tabindex="-1"></a>         <span class="co"># set counterfactual impact factors</span></span>
<span id="cb500-21"><a href="finalize-model-data-inputs.html#cb500-21" tabindex="-1"></a>         </span>
<span id="cb500-22"><a href="finalize-model-data-inputs.html#cb500-22" tabindex="-1"></a>         <span class="co"># CED</span></span>
<span id="cb500-23"><a href="finalize-model-data-inputs.html#cb500-23" tabindex="-1"></a>         <span class="at">CF_Mean_CED =</span> Mean_CED,</span>
<span id="cb500-24"><a href="finalize-model-data-inputs.html#cb500-24" tabindex="-1"></a>         <span class="at">CF_SE_CED =</span> SE_CED,</span>
<span id="cb500-25"><a href="finalize-model-data-inputs.html#cb500-25" tabindex="-1"></a>         </span>
<span id="cb500-26"><a href="finalize-model-data-inputs.html#cb500-26" tabindex="-1"></a>         <span class="co">#GHG</span></span>
<span id="cb500-27"><a href="finalize-model-data-inputs.html#cb500-27" tabindex="-1"></a>         <span class="at">CF_Mean_GHG =</span> Mean_GHG,</span>
<span id="cb500-28"><a href="finalize-model-data-inputs.html#cb500-28" tabindex="-1"></a>         <span class="at">CF_SE_GHG =</span> SE_GHG, </span>
<span id="cb500-29"><a href="finalize-model-data-inputs.html#cb500-29" tabindex="-1"></a>         </span>
<span id="cb500-30"><a href="finalize-model-data-inputs.html#cb500-30" tabindex="-1"></a>         <span class="co"># Water</span></span>
<span id="cb500-31"><a href="finalize-model-data-inputs.html#cb500-31" tabindex="-1"></a>         <span class="at">CF_Mean_WATER =</span> Mean_WATER,</span>
<span id="cb500-32"><a href="finalize-model-data-inputs.html#cb500-32" tabindex="-1"></a>         <span class="at">CF_SE_WATER =</span> SE_WATER,</span>
<span id="cb500-33"><a href="finalize-model-data-inputs.html#cb500-33" tabindex="-1"></a>         </span>
<span id="cb500-34"><a href="finalize-model-data-inputs.html#cb500-34" tabindex="-1"></a>         <span class="co"># Bluewater</span></span>
<span id="cb500-35"><a href="finalize-model-data-inputs.html#cb500-35" tabindex="-1"></a>         <span class="at">CF_Mean_BLUEWATER =</span> Mean_BLUEWATER,</span>
<span id="cb500-36"><a href="finalize-model-data-inputs.html#cb500-36" tabindex="-1"></a>         <span class="at">CF_SE_BLUEWATER =</span> SE_BLUEWATER,</span>
<span id="cb500-37"><a href="finalize-model-data-inputs.html#cb500-37" tabindex="-1"></a>         </span>
<span id="cb500-38"><a href="finalize-model-data-inputs.html#cb500-38" tabindex="-1"></a>         <span class="co"># Price</span></span>
<span id="cb500-39"><a href="finalize-model-data-inputs.html#cb500-39" tabindex="-1"></a>         <span class="at">CF_Mean_Food_price =</span> Mean_Food_price, </span>
<span id="cb500-40"><a href="finalize-model-data-inputs.html#cb500-40" tabindex="-1"></a>         <span class="at">CF_SE_Food_price =</span> SE_Food_price,</span>
<span id="cb500-41"><a href="finalize-model-data-inputs.html#cb500-41" tabindex="-1"></a>         </span>
<span id="cb500-42"><a href="finalize-model-data-inputs.html#cb500-42" tabindex="-1"></a>         <span class="co"># Forced labor</span></span>
<span id="cb500-43"><a href="finalize-model-data-inputs.html#cb500-43" tabindex="-1"></a>         <span class="at">CF_Mean_FL =</span> Mean_FL,</span>
<span id="cb500-44"><a href="finalize-model-data-inputs.html#cb500-44" tabindex="-1"></a>         <span class="at">CF_SE_FL =</span> SE_FL)</span></code></pre></div>
<p>Join impact factors with diet/health data.</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="finalize-model-data-inputs.html#cb501-1" tabindex="-1"></a>comb <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nhanes1, impact_factors1, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;subgroup_id&quot;</span> <span class="ot">=</span> <span class="st">&quot;subgroup&quot;</span>,</span>
<span id="cb501-2"><a href="finalize-model-data-inputs.html#cb501-2" tabindex="-1"></a>                                                                <span class="st">&quot;Foodgroup&quot;</span> <span class="ot">=</span> <span class="st">&quot;food&quot;</span>,</span>
<span id="cb501-3"><a href="finalize-model-data-inputs.html#cb501-3" tabindex="-1"></a>                                                                <span class="st">&quot;datatype&quot;</span> <span class="ot">=</span> <span class="st">&quot;food_type&quot;</span>))</span></code></pre></div>
<p>The impact factor units are manually defined below. We also set all the conversions to 1 for the four-pillar analysis (consult Nicole for this).</p>
<p>We also set all of the inedible and wasted proportions. For the environmental impact factors, theyâre set to âinedible_prop_fcidâ and âwasted_prop_fcidâ, and for the economic impact factor, itâs set to âinedible_prop_fnddsâ and âwasted_prop_fnddsâ. Similar to above, the standard errors are set to 0.</p>
<p>Lastly, similar to above, the counterfactual versions of the inedible/wasted proportions are set to their non-counterfactual counterparts.</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="finalize-model-data-inputs.html#cb502-1" tabindex="-1"></a>comb1 <span class="ot">&lt;-</span> </span>
<span id="cb502-2"><a href="finalize-model-data-inputs.html#cb502-2" tabindex="-1"></a>  comb <span class="sc">%&gt;%</span> </span>
<span id="cb502-3"><a href="finalize-model-data-inputs.html#cb502-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Food_price_unit =</span> <span class="st">&quot;USD&quot;</span>,</span>
<span id="cb502-4"><a href="finalize-model-data-inputs.html#cb502-4" tabindex="-1"></a>         <span class="at">Food_price_impact_unit =</span> <span class="fu">paste0</span>(Food_price_unit, <span class="st">&quot;/&quot;</span>, TMRED_intake_unit),</span>
<span id="cb502-5"><a href="finalize-model-data-inputs.html#cb502-5" tabindex="-1"></a>         <span class="at">CED_unit =</span> <span class="st">&quot;MJ&quot;</span>,</span>
<span id="cb502-6"><a href="finalize-model-data-inputs.html#cb502-6" tabindex="-1"></a>         <span class="at">CED_impact_unit =</span> <span class="fu">paste0</span>(CED_unit, <span class="st">&quot;/&quot;</span>, TMRED_intake_unit),</span>
<span id="cb502-7"><a href="finalize-model-data-inputs.html#cb502-7" tabindex="-1"></a>         <span class="at">GHG_unit =</span> <span class="st">&quot;kgCO2-eq&quot;</span>,</span>
<span id="cb502-8"><a href="finalize-model-data-inputs.html#cb502-8" tabindex="-1"></a>         <span class="at">GHG_impact_unit =</span> <span class="fu">paste0</span>(GHG_unit, <span class="st">&quot;/&quot;</span>, TMRED_intake_unit),</span>
<span id="cb502-9"><a href="finalize-model-data-inputs.html#cb502-9" tabindex="-1"></a>         <span class="at">WATER_unit =</span> <span class="st">&quot;L-eq&quot;</span>,</span>
<span id="cb502-10"><a href="finalize-model-data-inputs.html#cb502-10" tabindex="-1"></a>         <span class="at">WATER_impact_unit =</span> <span class="fu">paste0</span>(WATER_unit, <span class="st">&quot;/&quot;</span>, TMRED_intake_unit),</span>
<span id="cb502-11"><a href="finalize-model-data-inputs.html#cb502-11" tabindex="-1"></a>         <span class="at">BLUEWATER_unit =</span> <span class="st">&quot;L&quot;</span>,</span>
<span id="cb502-12"><a href="finalize-model-data-inputs.html#cb502-12" tabindex="-1"></a>         <span class="at">BLUEWATER_impact_unit =</span> <span class="fu">paste0</span>(BLUEWATER_unit, <span class="st">&quot;/&quot;</span>, TMRED_intake_unit),</span>
<span id="cb502-13"><a href="finalize-model-data-inputs.html#cb502-13" tabindex="-1"></a>         <span class="at">FL_unit =</span> <span class="st">&quot;mrh-eq&quot;</span>,</span>
<span id="cb502-14"><a href="finalize-model-data-inputs.html#cb502-14" tabindex="-1"></a>         <span class="at">FL_impact_unit =</span> <span class="fu">paste0</span>(FL_unit, <span class="st">&quot;/&quot;</span>, TMRED_intake_unit),</span>
<span id="cb502-15"><a href="finalize-model-data-inputs.html#cb502-15" tabindex="-1"></a>         </span>
<span id="cb502-16"><a href="finalize-model-data-inputs.html#cb502-16" tabindex="-1"></a>         <span class="co"># set to 1 for now</span></span>
<span id="cb502-17"><a href="finalize-model-data-inputs.html#cb502-17" tabindex="-1"></a>         <span class="at">Food_price_to_intake_conversion =</span> <span class="dv">1</span>,</span>
<span id="cb502-18"><a href="finalize-model-data-inputs.html#cb502-18" tabindex="-1"></a>         <span class="at">CED_to_intake_conversion   =</span> <span class="dv">1</span>,</span>
<span id="cb502-19"><a href="finalize-model-data-inputs.html#cb502-19" tabindex="-1"></a>         <span class="at">GHG_to_intake_conversion =</span> <span class="dv">1</span>,</span>
<span id="cb502-20"><a href="finalize-model-data-inputs.html#cb502-20" tabindex="-1"></a>         <span class="at">WATER_to_intake_conversion =</span> <span class="dv">1</span>,</span>
<span id="cb502-21"><a href="finalize-model-data-inputs.html#cb502-21" tabindex="-1"></a>         <span class="at">BLUEWATER_to_intake_conversion =</span> <span class="dv">1</span>,</span>
<span id="cb502-22"><a href="finalize-model-data-inputs.html#cb502-22" tabindex="-1"></a>         <span class="at">FL_to_intake_conversion =</span> <span class="dv">1</span>,</span>
<span id="cb502-23"><a href="finalize-model-data-inputs.html#cb502-23" tabindex="-1"></a>         <span class="at">substitution_unit =</span> <span class="dv">1</span>,</span>
<span id="cb502-24"><a href="finalize-model-data-inputs.html#cb502-24" tabindex="-1"></a>         </span>
<span id="cb502-25"><a href="finalize-model-data-inputs.html#cb502-25" tabindex="-1"></a>         <span class="co"># WASTE AND INEDIBLE PROPORTIONS</span></span>
<span id="cb502-26"><a href="finalize-model-data-inputs.html#cb502-26" tabindex="-1"></a>         </span>
<span id="cb502-27"><a href="finalize-model-data-inputs.html#cb502-27" tabindex="-1"></a>         <span class="co"># i) inedible</span></span>
<span id="cb502-28"><a href="finalize-model-data-inputs.html#cb502-28" tabindex="-1"></a>         <span class="at">CED_inedible_p =</span> inedible_prop_fcid,</span>
<span id="cb502-29"><a href="finalize-model-data-inputs.html#cb502-29" tabindex="-1"></a>         <span class="at">GHG_inedible_p =</span> inedible_prop_fcid,</span>
<span id="cb502-30"><a href="finalize-model-data-inputs.html#cb502-30" tabindex="-1"></a>         <span class="at">WATER_inedible_p =</span> inedible_prop_fcid,</span>
<span id="cb502-31"><a href="finalize-model-data-inputs.html#cb502-31" tabindex="-1"></a>         <span class="at">BLUEWATER_inedible_p =</span> inedible_prop_fcid,</span>
<span id="cb502-32"><a href="finalize-model-data-inputs.html#cb502-32" tabindex="-1"></a>         <span class="at">FL_inedible_p =</span> inedible_prop_fcid,</span>
<span id="cb502-33"><a href="finalize-model-data-inputs.html#cb502-33" tabindex="-1"></a>         <span class="at">Food_price_inedible_p =</span> inedible_prop_fndds,</span>
<span id="cb502-34"><a href="finalize-model-data-inputs.html#cb502-34" tabindex="-1"></a>         <span class="at">CED_inedible_p_se  =</span> <span class="dv">0</span>,</span>
<span id="cb502-35"><a href="finalize-model-data-inputs.html#cb502-35" tabindex="-1"></a>         <span class="at">GHG_inedible_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-36"><a href="finalize-model-data-inputs.html#cb502-36" tabindex="-1"></a>         <span class="at">WATER_inedible_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-37"><a href="finalize-model-data-inputs.html#cb502-37" tabindex="-1"></a>         <span class="at">BLUEWATER_inedible_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-38"><a href="finalize-model-data-inputs.html#cb502-38" tabindex="-1"></a>         <span class="at">FL_inedible_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-39"><a href="finalize-model-data-inputs.html#cb502-39" tabindex="-1"></a>         <span class="at">Food_price_inedible_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-40"><a href="finalize-model-data-inputs.html#cb502-40" tabindex="-1"></a>         </span>
<span id="cb502-41"><a href="finalize-model-data-inputs.html#cb502-41" tabindex="-1"></a>         <span class="co"># ii) wasted</span></span>
<span id="cb502-42"><a href="finalize-model-data-inputs.html#cb502-42" tabindex="-1"></a>         <span class="at">CED_foodwaste_p =</span> wasted_prop_fcid,</span>
<span id="cb502-43"><a href="finalize-model-data-inputs.html#cb502-43" tabindex="-1"></a>         <span class="at">GHG_foodwaste_p =</span> wasted_prop_fcid,</span>
<span id="cb502-44"><a href="finalize-model-data-inputs.html#cb502-44" tabindex="-1"></a>         <span class="at">WATER_foodwaste_p =</span> wasted_prop_fcid,</span>
<span id="cb502-45"><a href="finalize-model-data-inputs.html#cb502-45" tabindex="-1"></a>         <span class="at">BLUEWATER_foodwaste_p =</span> wasted_prop_fcid,</span>
<span id="cb502-46"><a href="finalize-model-data-inputs.html#cb502-46" tabindex="-1"></a>         <span class="at">FL_foodwaste_p =</span> wasted_prop_fcid,</span>
<span id="cb502-47"><a href="finalize-model-data-inputs.html#cb502-47" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p =</span> wasted_prop_fndds,</span>
<span id="cb502-48"><a href="finalize-model-data-inputs.html#cb502-48" tabindex="-1"></a>         <span class="at">CED_foodwaste_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-49"><a href="finalize-model-data-inputs.html#cb502-49" tabindex="-1"></a>         <span class="at">GHG_foodwaste_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-50"><a href="finalize-model-data-inputs.html#cb502-50" tabindex="-1"></a>         <span class="at">WATER_foodwaste_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-51"><a href="finalize-model-data-inputs.html#cb502-51" tabindex="-1"></a>         <span class="at">BLUEWATER_foodwaste_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-52"><a href="finalize-model-data-inputs.html#cb502-52" tabindex="-1"></a>         <span class="at">FL_foodwaste_p_se  =</span> <span class="dv">0</span>,</span>
<span id="cb502-53"><a href="finalize-model-data-inputs.html#cb502-53" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p_se =</span> <span class="dv">0</span>,</span>
<span id="cb502-54"><a href="finalize-model-data-inputs.html#cb502-54" tabindex="-1"></a>         </span>
<span id="cb502-55"><a href="finalize-model-data-inputs.html#cb502-55" tabindex="-1"></a>         <span class="co"># WASTE AND INEDIBLE (COUNTERFACTUALS)</span></span>
<span id="cb502-56"><a href="finalize-model-data-inputs.html#cb502-56" tabindex="-1"></a>         </span>
<span id="cb502-57"><a href="finalize-model-data-inputs.html#cb502-57" tabindex="-1"></a>         <span class="co"># i) inedible</span></span>
<span id="cb502-58"><a href="finalize-model-data-inputs.html#cb502-58" tabindex="-1"></a>         <span class="at">CF_CED_inedible_p =</span> CED_inedible_p,</span>
<span id="cb502-59"><a href="finalize-model-data-inputs.html#cb502-59" tabindex="-1"></a>         <span class="at">CF_GHG_inedible_p =</span> GHG_inedible_p,</span>
<span id="cb502-60"><a href="finalize-model-data-inputs.html#cb502-60" tabindex="-1"></a>         <span class="at">CF_WATER_inedible_p =</span> WATER_inedible_p,</span>
<span id="cb502-61"><a href="finalize-model-data-inputs.html#cb502-61" tabindex="-1"></a>         <span class="at">CF_BLUEWATER_inedible_p =</span> BLUEWATER_inedible_p,</span>
<span id="cb502-62"><a href="finalize-model-data-inputs.html#cb502-62" tabindex="-1"></a>         <span class="at">CF_Food_price_inedible_p   =</span> Food_price_inedible_p,</span>
<span id="cb502-63"><a href="finalize-model-data-inputs.html#cb502-63" tabindex="-1"></a>         <span class="at">CF_FL_inedible_p =</span> FL_inedible_p,</span>
<span id="cb502-64"><a href="finalize-model-data-inputs.html#cb502-64" tabindex="-1"></a>         </span>
<span id="cb502-65"><a href="finalize-model-data-inputs.html#cb502-65" tabindex="-1"></a>         <span class="at">CF_CED_inedible_p_se   =</span> CED_inedible_p_se,</span>
<span id="cb502-66"><a href="finalize-model-data-inputs.html#cb502-66" tabindex="-1"></a>         <span class="at">CF_GHG_inedible_p_se   =</span> GHG_inedible_p_se,</span>
<span id="cb502-67"><a href="finalize-model-data-inputs.html#cb502-67" tabindex="-1"></a>         <span class="at">CF_WATER_inedible_p_se =</span> WATER_inedible_p_se,</span>
<span id="cb502-68"><a href="finalize-model-data-inputs.html#cb502-68" tabindex="-1"></a>         <span class="at">CF_BLUEWATER_inedible_p_se =</span> BLUEWATER_inedible_p_se,</span>
<span id="cb502-69"><a href="finalize-model-data-inputs.html#cb502-69" tabindex="-1"></a>         <span class="at">CF_Food_price_inedible_p_se =</span> Food_price_inedible_p_se,</span>
<span id="cb502-70"><a href="finalize-model-data-inputs.html#cb502-70" tabindex="-1"></a>         <span class="at">CF_FL_inedible_p_se =</span> FL_inedible_p_se,</span>
<span id="cb502-71"><a href="finalize-model-data-inputs.html#cb502-71" tabindex="-1"></a>         </span>
<span id="cb502-72"><a href="finalize-model-data-inputs.html#cb502-72" tabindex="-1"></a>         <span class="co"># ii) wasted</span></span>
<span id="cb502-73"><a href="finalize-model-data-inputs.html#cb502-73" tabindex="-1"></a>         <span class="at">CF_CED_foodwaste_p =</span> CED_foodwaste_p,</span>
<span id="cb502-74"><a href="finalize-model-data-inputs.html#cb502-74" tabindex="-1"></a>         <span class="at">CF_GHG_foodwaste_p =</span> GHG_foodwaste_p,</span>
<span id="cb502-75"><a href="finalize-model-data-inputs.html#cb502-75" tabindex="-1"></a>         <span class="at">CF_WATER_foodwaste_p =</span> WATER_foodwaste_p,</span>
<span id="cb502-76"><a href="finalize-model-data-inputs.html#cb502-76" tabindex="-1"></a>         <span class="at">CF_BLUEWATER_foodwaste_p =</span> BLUEWATER_foodwaste_p,</span>
<span id="cb502-77"><a href="finalize-model-data-inputs.html#cb502-77" tabindex="-1"></a>         <span class="at">CF_Food_price_foodwaste_p =</span> Food_price_foodwaste_p,</span>
<span id="cb502-78"><a href="finalize-model-data-inputs.html#cb502-78" tabindex="-1"></a>         <span class="at">CF_FL_foodwaste_p =</span> FL_foodwaste_p,</span>
<span id="cb502-79"><a href="finalize-model-data-inputs.html#cb502-79" tabindex="-1"></a>         </span>
<span id="cb502-80"><a href="finalize-model-data-inputs.html#cb502-80" tabindex="-1"></a>         <span class="at">CF_CED_foodwaste_p_se =</span> CED_foodwaste_p_se,</span>
<span id="cb502-81"><a href="finalize-model-data-inputs.html#cb502-81" tabindex="-1"></a>         <span class="at">CF_GHG_foodwaste_p_se =</span> GHG_foodwaste_p_se,</span>
<span id="cb502-82"><a href="finalize-model-data-inputs.html#cb502-82" tabindex="-1"></a>         <span class="at">CF_WATER_foodwaste_p_se =</span> WATER_foodwaste_p_se,</span>
<span id="cb502-83"><a href="finalize-model-data-inputs.html#cb502-83" tabindex="-1"></a>         <span class="at">CF_BLUEWATER_foodwaste_p_se =</span> BLUEWATER_foodwaste_p_se,</span>
<span id="cb502-84"><a href="finalize-model-data-inputs.html#cb502-84" tabindex="-1"></a>         <span class="at">CF_Food_price_foodwaste_p_se =</span> Food_price_foodwaste_p_se,</span>
<span id="cb502-85"><a href="finalize-model-data-inputs.html#cb502-85" tabindex="-1"></a>         <span class="at">CF_FL_foodwaste_p_se =</span> FL_foodwaste_p_se)</span></code></pre></div>
<p>Change some variables names.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="finalize-model-data-inputs.html#cb503-1" tabindex="-1"></a>comb2 <span class="ot">&lt;-</span> comb1 <span class="sc">%&gt;%</span> </span>
<span id="cb503-2"><a href="finalize-model-data-inputs.html#cb503-2" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Population_size =</span> population) <span class="sc">%&gt;%</span> </span>
<span id="cb503-3"><a href="finalize-model-data-inputs.html#cb503-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Sex_label =</span> <span class="fu">ifelse</span>(Sex <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>),</span>
<span id="cb503-4"><a href="finalize-model-data-inputs.html#cb503-4" tabindex="-1"></a>         <span class="at">Intake_unit =</span> <span class="fu">paste0</span>(TMRED_intake_unit, <span class="st">&quot;/day&quot;</span>))</span></code></pre></div>
<p>List out the final order your want for the variables.</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="finalize-model-data-inputs.html#cb504-1" tabindex="-1"></a>final.order <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb504-2"><a href="finalize-model-data-inputs.html#cb504-2" tabindex="-1"></a>               <span class="st">&quot;subgroup_id&quot;</span>,</span>
<span id="cb504-3"><a href="finalize-model-data-inputs.html#cb504-3" tabindex="-1"></a>               <span class="st">&quot;Age&quot;</span>,</span>
<span id="cb504-4"><a href="finalize-model-data-inputs.html#cb504-4" tabindex="-1"></a>               <span class="st">&quot;Age_label&quot;</span>,</span>
<span id="cb504-5"><a href="finalize-model-data-inputs.html#cb504-5" tabindex="-1"></a>               <span class="st">&quot;Sex&quot;</span>,</span>
<span id="cb504-6"><a href="finalize-model-data-inputs.html#cb504-6" tabindex="-1"></a>               <span class="st">&quot;Sex_label&quot;</span>,</span>
<span id="cb504-7"><a href="finalize-model-data-inputs.html#cb504-7" tabindex="-1"></a>               <span class="st">&quot;Race&quot;</span>,</span>
<span id="cb504-8"><a href="finalize-model-data-inputs.html#cb504-8" tabindex="-1"></a>               <span class="st">&quot;Race_label&quot;</span>,</span>
<span id="cb504-9"><a href="finalize-model-data-inputs.html#cb504-9" tabindex="-1"></a>               </span>
<span id="cb504-10"><a href="finalize-model-data-inputs.html#cb504-10" tabindex="-1"></a>               <span class="st">&quot;Foodgroup&quot;</span>,</span>
<span id="cb504-11"><a href="finalize-model-data-inputs.html#cb504-11" tabindex="-1"></a>               <span class="st">&quot;datatype&quot;</span>,</span>
<span id="cb504-12"><a href="finalize-model-data-inputs.html#cb504-12" tabindex="-1"></a>               <span class="st">&quot;diet_pattern&quot;</span>,</span>
<span id="cb504-13"><a href="finalize-model-data-inputs.html#cb504-13" tabindex="-1"></a>               </span>
<span id="cb504-14"><a href="finalize-model-data-inputs.html#cb504-14" tabindex="-1"></a>               <span class="st">&quot;Mean_Intake&quot;</span>,</span>
<span id="cb504-15"><a href="finalize-model-data-inputs.html#cb504-15" tabindex="-1"></a>               <span class="st">&quot;SE_Intake&quot;</span>,</span>
<span id="cb504-16"><a href="finalize-model-data-inputs.html#cb504-16" tabindex="-1"></a>               <span class="st">&quot;sigma_u_wgt&quot;</span>,</span>
<span id="cb504-17"><a href="finalize-model-data-inputs.html#cb504-17" tabindex="-1"></a>               <span class="st">&quot;Intake_unit&quot;</span>,</span>
<span id="cb504-18"><a href="finalize-model-data-inputs.html#cb504-18" tabindex="-1"></a>               <span class="st">&quot;pro_gro&quot;</span>,</span>
<span id="cb504-19"><a href="finalize-model-data-inputs.html#cb504-19" tabindex="-1"></a>               <span class="st">&quot;pro_nongro&quot;</span>,</span>
<span id="cb504-20"><a href="finalize-model-data-inputs.html#cb504-20" tabindex="-1"></a>               <span class="st">&quot;diet_label&quot;</span>,</span>
<span id="cb504-21"><a href="finalize-model-data-inputs.html#cb504-21" tabindex="-1"></a>               <span class="st">&quot;Food_desc&quot;</span>,</span>
<span id="cb504-22"><a href="finalize-model-data-inputs.html#cb504-22" tabindex="-1"></a></span>
<span id="cb504-23"><a href="finalize-model-data-inputs.html#cb504-23" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_Intake&quot;</span>,</span>
<span id="cb504-24"><a href="finalize-model-data-inputs.html#cb504-24" tabindex="-1"></a>               <span class="st">&quot;CF_SE_Intake&quot;</span>,</span>
<span id="cb504-25"><a href="finalize-model-data-inputs.html#cb504-25" tabindex="-1"></a>               <span class="st">&quot;CF_sd_intake&quot;</span>,</span>
<span id="cb504-26"><a href="finalize-model-data-inputs.html#cb504-26" tabindex="-1"></a>               <span class="st">&quot;CF_intake_unit&quot;</span>,</span>
<span id="cb504-27"><a href="finalize-model-data-inputs.html#cb504-27" tabindex="-1"></a>               </span>
<span id="cb504-28"><a href="finalize-model-data-inputs.html#cb504-28" tabindex="-1"></a>               <span class="st">&quot;TMRED_Mean_Intake&quot;</span>,</span>
<span id="cb504-29"><a href="finalize-model-data-inputs.html#cb504-29" tabindex="-1"></a>               <span class="st">&quot;TMRED_SD_Intake&quot;</span>,</span>
<span id="cb504-30"><a href="finalize-model-data-inputs.html#cb504-30" tabindex="-1"></a>               <span class="st">&quot;TMRED_intake_unit&quot;</span>,</span>
<span id="cb504-31"><a href="finalize-model-data-inputs.html#cb504-31" tabindex="-1"></a>               </span>
<span id="cb504-32"><a href="finalize-model-data-inputs.html#cb504-32" tabindex="-1"></a>               <span class="st">&quot;Population_size&quot;</span>,</span>
<span id="cb504-33"><a href="finalize-model-data-inputs.html#cb504-33" tabindex="-1"></a>               <span class="st">&quot;overweight_rate&quot;</span>,</span>
<span id="cb504-34"><a href="finalize-model-data-inputs.html#cb504-34" tabindex="-1"></a>               <span class="st">&quot;overweight_rate_se&quot;</span>,</span>
<span id="cb504-35"><a href="finalize-model-data-inputs.html#cb504-35" tabindex="-1"></a>               <span class="st">&quot;hbp&quot;</span>,</span>
<span id="cb504-36"><a href="finalize-model-data-inputs.html#cb504-36" tabindex="-1"></a>               <span class="st">&quot;hbp_se&quot;</span>,</span>
<span id="cb504-37"><a href="finalize-model-data-inputs.html#cb504-37" tabindex="-1"></a>               <span class="st">&quot;nhb&quot;</span>,</span>
<span id="cb504-38"><a href="finalize-model-data-inputs.html#cb504-38" tabindex="-1"></a>               <span class="st">&quot;nhb_se&quot;</span>,</span>
<span id="cb504-39"><a href="finalize-model-data-inputs.html#cb504-39" tabindex="-1"></a>               <span class="st">&quot;sbp_mean&quot;</span>,</span>
<span id="cb504-40"><a href="finalize-model-data-inputs.html#cb504-40" tabindex="-1"></a>               <span class="st">&quot;sbp_se&quot;</span>,</span>
<span id="cb504-41"><a href="finalize-model-data-inputs.html#cb504-41" tabindex="-1"></a>               <span class="st">&quot;highSBP_rate&quot;</span>,</span>
<span id="cb504-42"><a href="finalize-model-data-inputs.html#cb504-42" tabindex="-1"></a>               <span class="st">&quot;highSBP_rate_se&quot;</span>,</span>
<span id="cb504-43"><a href="finalize-model-data-inputs.html#cb504-43" tabindex="-1"></a>               </span>
<span id="cb504-44"><a href="finalize-model-data-inputs.html#cb504-44" tabindex="-1"></a>               <span class="st">&quot;Mean_GHG&quot;</span>, </span>
<span id="cb504-45"><a href="finalize-model-data-inputs.html#cb504-45" tabindex="-1"></a>               <span class="st">&quot;SE_GHG&quot;</span>, </span>
<span id="cb504-46"><a href="finalize-model-data-inputs.html#cb504-46" tabindex="-1"></a>               <span class="st">&quot;GHG_unit&quot;</span>,</span>
<span id="cb504-47"><a href="finalize-model-data-inputs.html#cb504-47" tabindex="-1"></a>               <span class="st">&quot;GHG_impact_unit&quot;</span>,</span>
<span id="cb504-48"><a href="finalize-model-data-inputs.html#cb504-48" tabindex="-1"></a>               </span>
<span id="cb504-49"><a href="finalize-model-data-inputs.html#cb504-49" tabindex="-1"></a>               <span class="st">&quot;Mean_CED&quot;</span>, </span>
<span id="cb504-50"><a href="finalize-model-data-inputs.html#cb504-50" tabindex="-1"></a>               <span class="st">&quot;SE_CED&quot;</span>, </span>
<span id="cb504-51"><a href="finalize-model-data-inputs.html#cb504-51" tabindex="-1"></a>               <span class="st">&quot;CED_unit&quot;</span>,</span>
<span id="cb504-52"><a href="finalize-model-data-inputs.html#cb504-52" tabindex="-1"></a>               <span class="st">&quot;CED_impact_unit&quot;</span>,</span>
<span id="cb504-53"><a href="finalize-model-data-inputs.html#cb504-53" tabindex="-1"></a>               </span>
<span id="cb504-54"><a href="finalize-model-data-inputs.html#cb504-54" tabindex="-1"></a>               <span class="st">&quot;Mean_WATER&quot;</span>,</span>
<span id="cb504-55"><a href="finalize-model-data-inputs.html#cb504-55" tabindex="-1"></a>               <span class="st">&quot;SE_WATER&quot;</span>,</span>
<span id="cb504-56"><a href="finalize-model-data-inputs.html#cb504-56" tabindex="-1"></a>               <span class="st">&quot;WATER_unit&quot;</span>,</span>
<span id="cb504-57"><a href="finalize-model-data-inputs.html#cb504-57" tabindex="-1"></a>               <span class="st">&quot;WATER_impact_unit&quot;</span>,</span>
<span id="cb504-58"><a href="finalize-model-data-inputs.html#cb504-58" tabindex="-1"></a></span>
<span id="cb504-59"><a href="finalize-model-data-inputs.html#cb504-59" tabindex="-1"></a>               <span class="st">&quot;Mean_BLUEWATER&quot;</span>,</span>
<span id="cb504-60"><a href="finalize-model-data-inputs.html#cb504-60" tabindex="-1"></a>               <span class="st">&quot;SE_BLUEWATER&quot;</span>,</span>
<span id="cb504-61"><a href="finalize-model-data-inputs.html#cb504-61" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_unit&quot;</span>,</span>
<span id="cb504-62"><a href="finalize-model-data-inputs.html#cb504-62" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_impact_unit&quot;</span>,</span>
<span id="cb504-63"><a href="finalize-model-data-inputs.html#cb504-63" tabindex="-1"></a>               </span>
<span id="cb504-64"><a href="finalize-model-data-inputs.html#cb504-64" tabindex="-1"></a>               <span class="st">&quot;Mean_FL&quot;</span>, </span>
<span id="cb504-65"><a href="finalize-model-data-inputs.html#cb504-65" tabindex="-1"></a>               <span class="st">&quot;SE_FL&quot;</span>, </span>
<span id="cb504-66"><a href="finalize-model-data-inputs.html#cb504-66" tabindex="-1"></a>               <span class="st">&quot;FL_unit&quot;</span>,</span>
<span id="cb504-67"><a href="finalize-model-data-inputs.html#cb504-67" tabindex="-1"></a>               <span class="st">&quot;FL_impact_unit&quot;</span>,</span>
<span id="cb504-68"><a href="finalize-model-data-inputs.html#cb504-68" tabindex="-1"></a>               </span>
<span id="cb504-69"><a href="finalize-model-data-inputs.html#cb504-69" tabindex="-1"></a>               <span class="st">&quot;Mean_Food_price&quot;</span>, </span>
<span id="cb504-70"><a href="finalize-model-data-inputs.html#cb504-70" tabindex="-1"></a>               <span class="st">&quot;SE_Food_price&quot;</span>,  </span>
<span id="cb504-71"><a href="finalize-model-data-inputs.html#cb504-71" tabindex="-1"></a>               <span class="st">&quot;Food_price_unit&quot;</span>,</span>
<span id="cb504-72"><a href="finalize-model-data-inputs.html#cb504-72" tabindex="-1"></a>               <span class="st">&quot;Food_price_impact_unit&quot;</span>,</span>
<span id="cb504-73"><a href="finalize-model-data-inputs.html#cb504-73" tabindex="-1"></a>               </span>
<span id="cb504-74"><a href="finalize-model-data-inputs.html#cb504-74" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_GHG&quot;</span>,</span>
<span id="cb504-75"><a href="finalize-model-data-inputs.html#cb504-75" tabindex="-1"></a>               <span class="st">&quot;CF_SE_GHG&quot;</span>,</span>
<span id="cb504-76"><a href="finalize-model-data-inputs.html#cb504-76" tabindex="-1"></a>               </span>
<span id="cb504-77"><a href="finalize-model-data-inputs.html#cb504-77" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_CED&quot;</span>,</span>
<span id="cb504-78"><a href="finalize-model-data-inputs.html#cb504-78" tabindex="-1"></a>               <span class="st">&quot;CF_SE_CED&quot;</span>,</span>
<span id="cb504-79"><a href="finalize-model-data-inputs.html#cb504-79" tabindex="-1"></a>               </span>
<span id="cb504-80"><a href="finalize-model-data-inputs.html#cb504-80" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_WATER&quot;</span>,</span>
<span id="cb504-81"><a href="finalize-model-data-inputs.html#cb504-81" tabindex="-1"></a>               <span class="st">&quot;CF_SE_WATER&quot;</span>,</span>
<span id="cb504-82"><a href="finalize-model-data-inputs.html#cb504-82" tabindex="-1"></a>               </span>
<span id="cb504-83"><a href="finalize-model-data-inputs.html#cb504-83" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_BLUEWATER&quot;</span>,</span>
<span id="cb504-84"><a href="finalize-model-data-inputs.html#cb504-84" tabindex="-1"></a>               <span class="st">&quot;CF_SE_BLUEWATER&quot;</span>,</span>
<span id="cb504-85"><a href="finalize-model-data-inputs.html#cb504-85" tabindex="-1"></a>               </span>
<span id="cb504-86"><a href="finalize-model-data-inputs.html#cb504-86" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_FL&quot;</span>,</span>
<span id="cb504-87"><a href="finalize-model-data-inputs.html#cb504-87" tabindex="-1"></a>               <span class="st">&quot;CF_SE_FL&quot;</span>,</span>
<span id="cb504-88"><a href="finalize-model-data-inputs.html#cb504-88" tabindex="-1"></a>               </span>
<span id="cb504-89"><a href="finalize-model-data-inputs.html#cb504-89" tabindex="-1"></a>               <span class="st">&quot;CF_Mean_Food_price&quot;</span>,</span>
<span id="cb504-90"><a href="finalize-model-data-inputs.html#cb504-90" tabindex="-1"></a>               <span class="st">&quot;CF_SE_Food_price&quot;</span>,</span>
<span id="cb504-91"><a href="finalize-model-data-inputs.html#cb504-91" tabindex="-1"></a>               </span>
<span id="cb504-92"><a href="finalize-model-data-inputs.html#cb504-92" tabindex="-1"></a>               <span class="st">&quot;Mean_substitution_GHG&quot;</span>,</span>
<span id="cb504-93"><a href="finalize-model-data-inputs.html#cb504-93" tabindex="-1"></a>               <span class="st">&quot;SE_substitution_GHG&quot;</span>,</span>
<span id="cb504-94"><a href="finalize-model-data-inputs.html#cb504-94" tabindex="-1"></a>               </span>
<span id="cb504-95"><a href="finalize-model-data-inputs.html#cb504-95" tabindex="-1"></a>               <span class="st">&quot;Mean_substitution_CED&quot;</span>,</span>
<span id="cb504-96"><a href="finalize-model-data-inputs.html#cb504-96" tabindex="-1"></a>               <span class="st">&quot;SE_substitution_CED&quot;</span>,</span>
<span id="cb504-97"><a href="finalize-model-data-inputs.html#cb504-97" tabindex="-1"></a>               </span>
<span id="cb504-98"><a href="finalize-model-data-inputs.html#cb504-98" tabindex="-1"></a>               <span class="st">&quot;Mean_substitution_WATER&quot;</span>,</span>
<span id="cb504-99"><a href="finalize-model-data-inputs.html#cb504-99" tabindex="-1"></a>               <span class="st">&quot;SE_substitution_WATER&quot;</span>,</span>
<span id="cb504-100"><a href="finalize-model-data-inputs.html#cb504-100" tabindex="-1"></a>               </span>
<span id="cb504-101"><a href="finalize-model-data-inputs.html#cb504-101" tabindex="-1"></a>               <span class="st">&quot;Mean_substitution_BLUEWATER&quot;</span>,</span>
<span id="cb504-102"><a href="finalize-model-data-inputs.html#cb504-102" tabindex="-1"></a>               <span class="st">&quot;SE_substitution_BLUEWATER&quot;</span>,</span>
<span id="cb504-103"><a href="finalize-model-data-inputs.html#cb504-103" tabindex="-1"></a>               </span>
<span id="cb504-104"><a href="finalize-model-data-inputs.html#cb504-104" tabindex="-1"></a>               <span class="st">&quot;Mean_substitution_FL&quot;</span>,</span>
<span id="cb504-105"><a href="finalize-model-data-inputs.html#cb504-105" tabindex="-1"></a>               <span class="st">&quot;SE_substitution_FL&quot;</span>,</span>
<span id="cb504-106"><a href="finalize-model-data-inputs.html#cb504-106" tabindex="-1"></a>               </span>
<span id="cb504-107"><a href="finalize-model-data-inputs.html#cb504-107" tabindex="-1"></a>               <span class="st">&quot;Mean_substitution_Food_price&quot;</span>,</span>
<span id="cb504-108"><a href="finalize-model-data-inputs.html#cb504-108" tabindex="-1"></a>               <span class="st">&quot;SE_substitution_Food_price&quot;</span>,</span>
<span id="cb504-109"><a href="finalize-model-data-inputs.html#cb504-109" tabindex="-1"></a>               </span>
<span id="cb504-110"><a href="finalize-model-data-inputs.html#cb504-110" tabindex="-1"></a>               <span class="st">&quot;GHG_to_intake_conversion&quot;</span>,</span>
<span id="cb504-111"><a href="finalize-model-data-inputs.html#cb504-111" tabindex="-1"></a>               <span class="st">&quot;CED_to_intake_conversion&quot;</span>,</span>
<span id="cb504-112"><a href="finalize-model-data-inputs.html#cb504-112" tabindex="-1"></a>               <span class="st">&quot;WATER_to_intake_conversion&quot;</span>,</span>
<span id="cb504-113"><a href="finalize-model-data-inputs.html#cb504-113" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_to_intake_conversion&quot;</span>,</span>
<span id="cb504-114"><a href="finalize-model-data-inputs.html#cb504-114" tabindex="-1"></a>               <span class="st">&quot;FL_to_intake_conversion&quot;</span>,</span>
<span id="cb504-115"><a href="finalize-model-data-inputs.html#cb504-115" tabindex="-1"></a>               <span class="st">&quot;Food_price_to_intake_conversion&quot;</span>,</span>
<span id="cb504-116"><a href="finalize-model-data-inputs.html#cb504-116" tabindex="-1"></a>               <span class="st">&quot;substitution_unit&quot;</span>,</span>
<span id="cb504-117"><a href="finalize-model-data-inputs.html#cb504-117" tabindex="-1"></a>               </span>
<span id="cb504-118"><a href="finalize-model-data-inputs.html#cb504-118" tabindex="-1"></a>               <span class="st">&quot;GHG_inedible_p&quot;</span>,</span>
<span id="cb504-119"><a href="finalize-model-data-inputs.html#cb504-119" tabindex="-1"></a>               <span class="st">&quot;GHG_inedible_p_se&quot;</span>,</span>
<span id="cb504-120"><a href="finalize-model-data-inputs.html#cb504-120" tabindex="-1"></a>               <span class="st">&quot;CED_inedible_p&quot;</span>,</span>
<span id="cb504-121"><a href="finalize-model-data-inputs.html#cb504-121" tabindex="-1"></a>               <span class="st">&quot;CED_inedible_p_se&quot;</span>,</span>
<span id="cb504-122"><a href="finalize-model-data-inputs.html#cb504-122" tabindex="-1"></a>               <span class="st">&quot;WATER_inedible_p&quot;</span>,</span>
<span id="cb504-123"><a href="finalize-model-data-inputs.html#cb504-123" tabindex="-1"></a>               <span class="st">&quot;WATER_inedible_p_se&quot;</span>,</span>
<span id="cb504-124"><a href="finalize-model-data-inputs.html#cb504-124" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_inedible_p&quot;</span>,</span>
<span id="cb504-125"><a href="finalize-model-data-inputs.html#cb504-125" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_inedible_p_se&quot;</span>,</span>
<span id="cb504-126"><a href="finalize-model-data-inputs.html#cb504-126" tabindex="-1"></a>               <span class="st">&quot;FL_inedible_p&quot;</span>,</span>
<span id="cb504-127"><a href="finalize-model-data-inputs.html#cb504-127" tabindex="-1"></a>               <span class="st">&quot;FL_inedible_p_se&quot;</span>,</span>
<span id="cb504-128"><a href="finalize-model-data-inputs.html#cb504-128" tabindex="-1"></a>               <span class="st">&quot;Food_price_inedible_p&quot;</span>,</span>
<span id="cb504-129"><a href="finalize-model-data-inputs.html#cb504-129" tabindex="-1"></a>               <span class="st">&quot;Food_price_inedible_p_se&quot;</span>,</span>
<span id="cb504-130"><a href="finalize-model-data-inputs.html#cb504-130" tabindex="-1"></a>               </span>
<span id="cb504-131"><a href="finalize-model-data-inputs.html#cb504-131" tabindex="-1"></a>               <span class="st">&quot;GHG_foodwaste_p&quot;</span>,</span>
<span id="cb504-132"><a href="finalize-model-data-inputs.html#cb504-132" tabindex="-1"></a>               <span class="st">&quot;GHG_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-133"><a href="finalize-model-data-inputs.html#cb504-133" tabindex="-1"></a>               <span class="st">&quot;CED_foodwaste_p&quot;</span>,</span>
<span id="cb504-134"><a href="finalize-model-data-inputs.html#cb504-134" tabindex="-1"></a>               <span class="st">&quot;CED_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-135"><a href="finalize-model-data-inputs.html#cb504-135" tabindex="-1"></a>               <span class="st">&quot;WATER_foodwaste_p&quot;</span>,</span>
<span id="cb504-136"><a href="finalize-model-data-inputs.html#cb504-136" tabindex="-1"></a>               <span class="st">&quot;WATER_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-137"><a href="finalize-model-data-inputs.html#cb504-137" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_foodwaste_p&quot;</span>,</span>
<span id="cb504-138"><a href="finalize-model-data-inputs.html#cb504-138" tabindex="-1"></a>               <span class="st">&quot;BLUEWATER_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-139"><a href="finalize-model-data-inputs.html#cb504-139" tabindex="-1"></a>               <span class="st">&quot;FL_foodwaste_p&quot;</span>,</span>
<span id="cb504-140"><a href="finalize-model-data-inputs.html#cb504-140" tabindex="-1"></a>               <span class="st">&quot;FL_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-141"><a href="finalize-model-data-inputs.html#cb504-141" tabindex="-1"></a>               <span class="st">&quot;Food_price_foodwaste_p&quot;</span>,</span>
<span id="cb504-142"><a href="finalize-model-data-inputs.html#cb504-142" tabindex="-1"></a>               <span class="st">&quot;Food_price_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-143"><a href="finalize-model-data-inputs.html#cb504-143" tabindex="-1"></a>               </span>
<span id="cb504-144"><a href="finalize-model-data-inputs.html#cb504-144" tabindex="-1"></a>               <span class="st">&quot;CF_GHG_inedible_p&quot;</span>,</span>
<span id="cb504-145"><a href="finalize-model-data-inputs.html#cb504-145" tabindex="-1"></a>               <span class="st">&quot;CF_GHG_inedible_p_se&quot;</span>,</span>
<span id="cb504-146"><a href="finalize-model-data-inputs.html#cb504-146" tabindex="-1"></a>               <span class="st">&quot;CF_CED_inedible_p&quot;</span>,</span>
<span id="cb504-147"><a href="finalize-model-data-inputs.html#cb504-147" tabindex="-1"></a>               <span class="st">&quot;CF_CED_inedible_p_se&quot;</span>,</span>
<span id="cb504-148"><a href="finalize-model-data-inputs.html#cb504-148" tabindex="-1"></a>               <span class="st">&quot;CF_WATER_inedible_p&quot;</span>,</span>
<span id="cb504-149"><a href="finalize-model-data-inputs.html#cb504-149" tabindex="-1"></a>               <span class="st">&quot;CF_WATER_inedible_p_se&quot;</span>,</span>
<span id="cb504-150"><a href="finalize-model-data-inputs.html#cb504-150" tabindex="-1"></a>               <span class="st">&quot;CF_BLUEWATER_inedible_p&quot;</span>,</span>
<span id="cb504-151"><a href="finalize-model-data-inputs.html#cb504-151" tabindex="-1"></a>               <span class="st">&quot;CF_BLUEWATER_inedible_p_se&quot;</span>,</span>
<span id="cb504-152"><a href="finalize-model-data-inputs.html#cb504-152" tabindex="-1"></a>               <span class="st">&quot;CF_FL_inedible_p&quot;</span>,</span>
<span id="cb504-153"><a href="finalize-model-data-inputs.html#cb504-153" tabindex="-1"></a>               <span class="st">&quot;CF_FL_inedible_p_se&quot;</span>,</span>
<span id="cb504-154"><a href="finalize-model-data-inputs.html#cb504-154" tabindex="-1"></a>               <span class="st">&quot;CF_Food_price_inedible_p&quot;</span>,</span>
<span id="cb504-155"><a href="finalize-model-data-inputs.html#cb504-155" tabindex="-1"></a>               <span class="st">&quot;CF_Food_price_inedible_p_se&quot;</span>,</span>
<span id="cb504-156"><a href="finalize-model-data-inputs.html#cb504-156" tabindex="-1"></a>               </span>
<span id="cb504-157"><a href="finalize-model-data-inputs.html#cb504-157" tabindex="-1"></a>               <span class="st">&quot;CF_GHG_foodwaste_p&quot;</span>,</span>
<span id="cb504-158"><a href="finalize-model-data-inputs.html#cb504-158" tabindex="-1"></a>               <span class="st">&quot;CF_GHG_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-159"><a href="finalize-model-data-inputs.html#cb504-159" tabindex="-1"></a>               <span class="st">&quot;CF_CED_foodwaste_p&quot;</span>,</span>
<span id="cb504-160"><a href="finalize-model-data-inputs.html#cb504-160" tabindex="-1"></a>               <span class="st">&quot;CF_CED_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-161"><a href="finalize-model-data-inputs.html#cb504-161" tabindex="-1"></a>               <span class="st">&quot;CF_WATER_foodwaste_p&quot;</span>,</span>
<span id="cb504-162"><a href="finalize-model-data-inputs.html#cb504-162" tabindex="-1"></a>               <span class="st">&quot;CF_WATER_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-163"><a href="finalize-model-data-inputs.html#cb504-163" tabindex="-1"></a>               <span class="st">&quot;CF_BLUEWATER_foodwaste_p&quot;</span>,</span>
<span id="cb504-164"><a href="finalize-model-data-inputs.html#cb504-164" tabindex="-1"></a>               <span class="st">&quot;CF_BLUEWATER_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-165"><a href="finalize-model-data-inputs.html#cb504-165" tabindex="-1"></a>               <span class="st">&quot;CF_FL_foodwaste_p&quot;</span>,</span>
<span id="cb504-166"><a href="finalize-model-data-inputs.html#cb504-166" tabindex="-1"></a>               <span class="st">&quot;CF_FL_foodwaste_p_se&quot;</span>,</span>
<span id="cb504-167"><a href="finalize-model-data-inputs.html#cb504-167" tabindex="-1"></a>               <span class="st">&quot;CF_Food_price_foodwaste_p&quot;</span>,</span>
<span id="cb504-168"><a href="finalize-model-data-inputs.html#cb504-168" tabindex="-1"></a>               <span class="st">&quot;CF_Food_price_foodwaste_p_se&quot;</span>)</span></code></pre></div>
<p>Apply the final order.</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="finalize-model-data-inputs.html#cb505-1" tabindex="-1"></a><span class="co"># apply</span></span>
<span id="cb505-2"><a href="finalize-model-data-inputs.html#cb505-2" tabindex="-1"></a>final <span class="ot">&lt;-</span> comb2[,final.order]</span></code></pre></div>
<p>Filter out diet variables you donât want included in your dataset/analysis.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="finalize-model-data-inputs.html#cb506-1" tabindex="-1"></a>final1 <span class="ot">&lt;-</span> final <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>(Foodgroup <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;fiber&quot;</span>, <span class="st">&quot;kcal&quot;</span>, <span class="st">&quot;pf_animal&quot;</span>, <span class="st">&quot;pf_leg&quot;</span>, <span class="st">&quot;pf_plant&quot;</span>,</span>
<span id="cb506-2"><a href="finalize-model-data-inputs.html#cb506-2" tabindex="-1"></a>                                  <span class="st">&quot;pf_soy&quot;</span>, <span class="st">&quot;pufa_energy&quot;</span>, <span class="st">&quot;sfat_energy&quot;</span>, <span class="st">&quot;sea_omega3_fa&quot;</span>,</span>
<span id="cb506-3"><a href="finalize-model-data-inputs.html#cb506-3" tabindex="-1"></a>                                  <span class="st">&quot;veg_leg&quot;</span>)))</span></code></pre></div>
<p>Lastly, we decided as a team to utilize the inedible/wasted proportions that were calculated at the FCID-level (i.e., environmental impact factors).</p>
<p>Below, we replace the cost inedible/wasted proportions with the GHG inedible/wasted proportions when theyâre not missing. If theyâre alrady NA, then they remain NA.</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="finalize-model-data-inputs.html#cb507-1" tabindex="-1"></a>final2 <span class="ot">&lt;-</span> final1 <span class="sc">%&gt;%</span> </span>
<span id="cb507-2"><a href="finalize-model-data-inputs.html#cb507-2" tabindex="-1"></a>  <span class="co"># renaming with _new to compare old vs. new values</span></span>
<span id="cb507-3"><a href="finalize-model-data-inputs.html#cb507-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Food_price_inedible_p_new =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(Food_price_inedible_p)) <span class="sc">&amp;</span> <span class="sc">!</span>(<span class="fu">is.na</span>(GHG_inedible_p)), GHG_inedible_p, Food_price_inedible_p),</span>
<span id="cb507-4"><a href="finalize-model-data-inputs.html#cb507-4" tabindex="-1"></a>         <span class="at">Food_price_inedible_p_se_new =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(Food_price_inedible_p)) <span class="sc">&amp;</span> <span class="sc">!</span>(<span class="fu">is.na</span>(GHG_inedible_p)), GHG_inedible_p_se, Food_price_inedible_p_se),</span>
<span id="cb507-5"><a href="finalize-model-data-inputs.html#cb507-5" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p_new =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(Food_price_foodwaste_p)) <span class="sc">&amp;</span> <span class="sc">!</span>(<span class="fu">is.na</span>(GHG_foodwaste_p)), GHG_foodwaste_p, Food_price_foodwaste_p),</span>
<span id="cb507-6"><a href="finalize-model-data-inputs.html#cb507-6" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p_se_new =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(Food_price_foodwaste_p)) <span class="sc">&amp;</span> <span class="sc">!</span>(<span class="fu">is.na</span>(GHG_foodwaste_p)), GHG_foodwaste_p_se, Food_price_foodwaste_p_se))</span>
<span id="cb507-7"><a href="finalize-model-data-inputs.html#cb507-7" tabindex="-1"></a></span>
<span id="cb507-8"><a href="finalize-model-data-inputs.html#cb507-8" tabindex="-1"></a></span>
<span id="cb507-9"><a href="finalize-model-data-inputs.html#cb507-9" tabindex="-1"></a><span class="co"># replacing the old inedible/ replacing with new, and getting rid of &quot;new&quot; to reduce confusion</span></span>
<span id="cb507-10"><a href="finalize-model-data-inputs.html#cb507-10" tabindex="-1"></a>final3 <span class="ot">&lt;-</span> final2 <span class="sc">%&gt;%</span> </span>
<span id="cb507-11"><a href="finalize-model-data-inputs.html#cb507-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Food_price_inedible_p =</span> Food_price_inedible_p_new,</span>
<span id="cb507-12"><a href="finalize-model-data-inputs.html#cb507-12" tabindex="-1"></a>         <span class="at">Food_price_inedible_p_se =</span> Food_price_inedible_p_se_new,</span>
<span id="cb507-13"><a href="finalize-model-data-inputs.html#cb507-13" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p =</span> Food_price_foodwaste_p_new,</span>
<span id="cb507-14"><a href="finalize-model-data-inputs.html#cb507-14" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p_se =</span> Food_price_foodwaste_p_se_new,</span>
<span id="cb507-15"><a href="finalize-model-data-inputs.html#cb507-15" tabindex="-1"></a>         <span class="at">CF_Food_price_inedible_p   =</span> Food_price_inedible_p_new,</span>
<span id="cb507-16"><a href="finalize-model-data-inputs.html#cb507-16" tabindex="-1"></a>         <span class="at">CF_Food_price_inedible_p_se =</span> Food_price_inedible_p_se_new,</span>
<span id="cb507-17"><a href="finalize-model-data-inputs.html#cb507-17" tabindex="-1"></a>         <span class="at">CF_Food_price_foodwaste_p =</span> Food_price_foodwaste_p_new,</span>
<span id="cb507-18"><a href="finalize-model-data-inputs.html#cb507-18" tabindex="-1"></a>         <span class="at">CF_Food_price_foodwaste_p_se =</span> Food_price_foodwaste_p_se_new,</span>
<span id="cb507-19"><a href="finalize-model-data-inputs.html#cb507-19" tabindex="-1"></a>         <span class="at">Food_price_inedible_p_new=</span><span class="cn">NULL</span>,</span>
<span id="cb507-20"><a href="finalize-model-data-inputs.html#cb507-20" tabindex="-1"></a>         <span class="at">Food_price_inedible_p_se_new=</span><span class="cn">NULL</span>,</span>
<span id="cb507-21"><a href="finalize-model-data-inputs.html#cb507-21" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p_new=</span><span class="cn">NULL</span>,</span>
<span id="cb507-22"><a href="finalize-model-data-inputs.html#cb507-22" tabindex="-1"></a>         <span class="at">Food_price_foodwaste_p_se_new=</span><span class="cn">NULL</span>)</span></code></pre></div>
<p>Export to the âFINALâ folder.</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="finalize-model-data-inputs.html#cb508-1" tabindex="-1"></a><span class="fu">write_csv</span>(final3, <span class="fu">paste0</span>(<span class="st">&quot;data_inputs/FINAL/model_data/mega_costenv_structure_&quot;</span>, date, <span class="st">&quot;_FINAL.csv&quot;</span>))</span></code></pre></div>
</div>
<div id="copy-model-inputs-to-github" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Copy Model Inputs to GitHub<a href="finalize-model-data-inputs.html#copy-model-inputs-to-github" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All of the model input files are currently located in the âFINALâ folder on Box. Below, we copy them to GitHub so that we can access them on the cluster.</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="finalize-model-data-inputs.html#cb509-1" tabindex="-1"></a>current_folder <span class="ot">&lt;-</span> <span class="st">&quot;data_inputs/FINAL/model_data&quot;</span> <span class="co"># where files currently live on Box</span></span>
<span id="cb509-2"><a href="finalize-model-data-inputs.html#cb509-2" tabindex="-1"></a></span>
<span id="cb509-3"><a href="finalize-model-data-inputs.html#cb509-3" tabindex="-1"></a>new_folder <span class="ot">&lt;-</span> <span class="st">&quot;/Users/bmb73/Documents/GitHub/LASTING/in/FINAL&quot;</span> <span class="co"># Github repo on Brooke&#39;s laptop</span></span>
<span id="cb509-4"><a href="finalize-model-data-inputs.html#cb509-4" tabindex="-1"></a><span class="co"># new_folder &lt;- &quot;/Users/fcudhe01/Documents/GitHub/LASTING/in/FINAL&quot; # Github repo on Fred&#39;s laptop</span></span>
<span id="cb509-5"><a href="finalize-model-data-inputs.html#cb509-5" tabindex="-1"></a></span>
<span id="cb509-6"><a href="finalize-model-data-inputs.html#cb509-6" tabindex="-1"></a>list_of_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(current_folder, <span class="st">&quot;.csv&quot;</span>) </span>
<span id="cb509-7"><a href="finalize-model-data-inputs.html#cb509-7" tabindex="-1"></a></span>
<span id="cb509-8"><a href="finalize-model-data-inputs.html#cb509-8" tabindex="-1"></a><span class="fu">file.copy</span>(<span class="fu">file.path</span>(current_folder, list_of_files), new_folder)</span></code></pre></div>
<pre><code>##  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="calculate-cost-environment-and-social-impact-factors.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/07-finalize-inputs.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
